<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Catch the Offer Game</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"> 
  <style>
    /* same CSS as before, no major change needed */
    body {
      background: url('background .jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Poppins', Arial, sans-serif;
      margin: 0;
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    .header-buttons {
      position: absolute;
      top: 10px;
      right: 20px;
      display: flex;
      gap: 15px;
    }

    .header-buttons img {
      width: 40px;
      height: 40px;
      cursor: pointer;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      padding: 5px;
      transition: transform 0.2s;
    }

    .header-buttons img:hover {
      transform: scale(1.1);
    }

    .center-text {
      text-align: center;
    }

    .center-text img {
      display: block;
      margin: 0 auto 10px;
    }

    .play-button {
      max-width: 160px;
      height: auto;
      cursor: pointer;
      display: block;
      margin: 0 auto;
    }

    #cart-popup, #account-box {
      position: fixed;
      top: 20%;
      right: 20px;
      background: rgba(0,0,0,0.9);
      color: white;
      padding: 20px;
      border-radius: 10px;
      display: none;
      width: 250px;
      max-height: 300px;
      box-shadow: 0 0 10px #00ffff;
      z-index: 100;
    }

    #cart-popup h3, #account-box h3 {
      margin-bottom: 10px;
      border-bottom: 1px solid #aaa;
    }

  #cart-popup ul {
  list-style: none;
  padding: 0;
  max-height: 180px;
  overflow-y: auto;
}


    #cart-popup li {
      margin-bottom: 5px;
    }

    #cart-popup button, #account-box button {
      margin-top: 10px;
      background: #dc3545;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <!-- Header Buttons -->
  <div class="header-buttons">
    <img src="user button.png" alt="Account" onclick="showAccount()" title="Account">
    <img src="cart button.png" alt="Cart" onclick="toggleCart()" title="Cart">
  </div>

  <!-- Center Content -->
  <div class="center-text">
    <img src="logo.png" alt="Catch the Offer" style="max-width: 300px;" />
    <a href="game.html">
      <img src="play last.png" alt="Play" class="play-button" />
    </a>
  </div>

  <!-- Cart Popup -->
  <div id="cart-popup">
    <h3>Cart Items</h3>
    <ul id="cart-list"></ul>
    <button onclick="closeCart()">Close</button>
  </div>

  <!-- Account Popup -->
  <div id="account-box">
    <h3>User Details</h3>
    <p id="account-details"></p>
    <button onclick="closeAccount()">Close</button>
  </div>

<script>
  // üõ°Ô∏è Redirect if user not logged in
  const storedData = JSON.parse(localStorage.getItem("currentUser"));
  if (!storedData || !storedData.username || !storedData.mobile) {
    window.location.href = "login.html";
  }

  const userData = storedData;

  function showAccount() {
    // Hide cart popup first
    document.getElementById("cart-popup").style.display = "none";

    const box = document.getElementById("account-box");
    const details = document.getElementById("account-details");
    details.innerHTML = `Name: ${userData.username}<br>Phone: ${userData.mobile}`;
    box.style.display = "block";
  }

  function closeAccount() {
    document.getElementById("account-box").style.display = "none";
  }

  function toggleCart() {
    // Hide account popup first
    document.getElementById("account-box").style.display = "none";

    const popup = document.getElementById("cart-popup");
    const list = document.getElementById("cart-list");
    list.innerHTML = "";

    const mobile = userData?.mobile || "";
    const rewardKey = `caughtOffers_${mobile}`;
    const caughtOffers = JSON.parse(localStorage.getItem(rewardKey) || "[]");

    if (caughtOffers.length === 0) {
      list.innerHTML = "<li>Your cart is empty!</li>";
    } else {
      caughtOffers.forEach((item, index) => {
        const li = document.createElement("li");
        li.textContent = `${index + 1}. ${item.label} - ${item.value}`;
        list.appendChild(li);
      });
    }

    popup.style.display = "block";
  }

  function closeCart() {
    document.getElementById("cart-popup").style.display = "none";
  }
</script>


</body>
</html>
